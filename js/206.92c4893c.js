"use strict";(self["webpackChunkmyblog"]=self["webpackChunkmyblog"]||[]).push([[206],{2206:function(t,s,a){a.r(s),a.d(s,{default:function(){return f}});var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"modify"},[s("div",{staticClass:"modify_box"},[s("div",{staticClass:"modify_label"},[t._v("头像")]),s("div",{staticClass:"modify_box_right"},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://116.62.23.57/modify/uploadImage","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[s("img",{staticClass:"avatar",attrs:{src:t.userInfo.avatar}})])],1)]),s("form",{attrs:{action:""}}),s("div",{staticClass:"modify_box"},[s("div",{staticClass:"modify_label"},[t._v("昵称")]),s("div",{staticClass:"modify_box_right"},[s("el-input",{staticClass:"modify_input",model:{value:t.userInfo.nickname,callback:function(s){t.$set(t.userInfo,"nickname",s)},expression:"userInfo.nickname"}})],1)]),s("div",{staticClass:"modify_box"},[s("div",{staticClass:"modify_label"},[t._v("签名")]),s("div",{staticClass:"modify_box_right"},[s("el-input",{staticClass:"modify_input",model:{value:t.userInfo.signature,callback:function(s){t.$set(t.userInfo,"signature",s)},expression:"userInfo.signature"}})],1)]),s("div",{staticClass:"modify_box"},[s("div",{staticClass:"modify_label"},[t._v("标签")]),s("div",{staticClass:"modify_box_right"},[s("el-input",{staticClass:"modify_input_tag",model:{value:t.tags,callback:function(s){t.tags=s},expression:"tags"}})],1)]),s("div",{staticClass:"modify_box"},[s("div",{staticClass:"modify_label"},[t._v("其他")]),s("div",{staticClass:"modify_box_right"},[s("el-input",{staticClass:"modify_input_tag",attrs:{value:"暂时没想到。。。"}})],1)]),s("div",{staticClass:"modify_box"},[s("div",{staticClass:"modify_label"}),s("div",{staticClass:"modify_box_right"},[s("button",{staticClass:"my_button submit_button",attrs:{type:"button"},on:{click:function(s){return t.modifyData()}}},[t._v(" 确认修改 ")])])])])},e=[],o=a(9613);function n(t){return(0,o.Z)({url:"/modify/modifyData",method:"post",data:t})}function r(t){return(0,o.Z)({url:"/modify/updateAvatar",method:"post",data:t})}var d={data(){return{userInfo:{nickname:"",avatar:"",signature:"",tags:[]}}},computed:{tags:{get(){return this.userInfo.tags.join(" ")},set(t){this.userInfo.tags=t.split(" ")}}},created(){this.userInfo=this.$store.state.userInfo},methods:{handleAvatarSuccess(t,s){if(s.response.status){let t={avatar:s.response.data};r(t).then((t=>{t.data.status?this.$message.success(t.data.msg):this.$message.warning(t.data.msg),this.$store.commit("setUSERINFO",t.data.data),this.userInfo.avatar=URL.createObjectURL(s.raw)})).catch((t=>{}))}},beforeAvatarUpload(t){const s=["image/jpeg","image/png"],a=t.size/1024/1024<2;return s.includes(t.type)||this.$message.error("上传头像格式需为(jpg,png)"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),s.includes(t.type)&&a},modifyData(){let t={nickname:this.userInfo.nickname,signature:this.userInfo.signature,tags:this.userInfo.tags};n(t).then((t=>{t.data.status?(this.$message.success(t.data.msg),this.$store.commit("setUSERINFO",t.data.data)):this.$message.warning(t.data.msg)}))}}},l=d,u=a(1001),c=(0,u.Z)(l,i,e,!1,null,"f013d1cc",null),f=c.exports}}]);